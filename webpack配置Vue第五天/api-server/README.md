# api server

前后端分离情况下：

- 后端处理数据，提供 API
- 前端根据接口 API 拿到数据，展示给用户，处理页面

## 运行说明

1. **开启 MongoDB 服务器**
2. `npm start` 启动 API Server（默认监听 5000 端口）

## 制定接口

- 双方协商
- 接口的名字
- 接口返回什么数据
- 开发该业务功能需要哪些接口提供哪些数据

## 同步开发

- 后端提供数据接口
- 前端
  + 写页面
  + 如果服务端接口已经做好了，你可以在开发过程中去使用
  + 如果你的业务依赖的接口还没做好，则需要自己去 mock 数据
    * mock（根据之前约定好的接口规则） 数据
- 对接，联调
  + 使用服务端提供的真实接口测试你的具体页面业务功能
  + 在测试的过程中，如果有接口无法满足的需求则双方协商，让服务端修改接口

## 抽象数据模型

```json
{
  id: 1,
  name: '铠',
  profession: '战士',
  voice: '服务端的可访问资源路径',
  avatar: '服务端的可访问资源路径',
  story: '背景故事'
}
```

## 接口制定

- 首先你要知道接口是做什么的？
  + 接口是针对某个具体数据的处理
  + 接口的名字最好有意义
  + 名字一般都建议使用名词
  + 而且如果该资源是多个的，则建议使用名词复数

### 获取英雄列表数据

#### 请求路径

/heros

#### 请求方法

GET

#### 请求参数

无

#### 请求体

无

#### 响应结果

```json
{
  data: [
    { id, name,  },
    { id, name,  },
    { id, name,  },
    { id, name,  },
    { id, name,  },
  ]
}
```

### 添加英雄

#### 请求路径

/heros

#### 请求方法

POST

#### 请求参数

无

#### 请求体

- 查询字符串格式的请求体
- 带有文件的请求体
- json 格式字符串

格式要求：json | queryString

数据参数：

| 字段名称 |  类型  | 是否为空 |                       验证规则                      |
|----------|--------|----------|-----------------------------------------------------|
| name     |        | no       | 2-18 不允许有特殊字符，可以有下划线，必须有字母开头 |
| age      | Number | yes      | 1 - 150 之间                                        |
|          |        |          |                                                     |

张三18男123456

"name=张三&age=18&gender=男&password=123456&hobby=[123,312,32,13,21]"

"{
  "name": "张三",
  "age": 18,
  "gender": "男",
  "password": "123456",
  "hobby": [
    123,
    312,
    321,
    321
  ]
}"

#### 响应结果

示例：

```json
{
  code: 200,
  message: ''
}
```

### 删除英雄

### 更新英雄

### 查看英雄
